#!/bin/bash

echo "ğŸ” Railway Build Debug Information"
echo "================================="

echo "ğŸ“‹ Environment Variables:"
echo "NODE_ENV: $NODE_ENV"
echo "RAILS_ENV: $RAILS_ENV"
echo "DATABASE_URL: ${DATABASE_URL:0:30}..." # Show first 30 chars only
echo "REDIS_URL: ${REDIS_URL:0:30}..."

echo ""
echo "ğŸ”§ System Information:"
echo "Node.js: $(node --version)"
echo "npm: $(npm --version)"
echo "Ruby: $(ruby --version)"
echo "Bundler: $(bundle --version)"

echo ""
echo "ğŸ“¦ Package Information:"
echo "pnpm: $(pnpm --version)"

echo ""
echo "ğŸ“ Directory Structure:"
ls -la

echo ""
echo "ğŸ“ Backend Directory:"
ls -la backend/

echo ""
echo "ğŸ“ Frontend Directory:"  
ls -la frontend/

echo ""
echo "ğŸ” Checking critical files:"
echo "Gemfile exists: $(test -f backend/Gemfile && echo "âœ…" || echo "âŒ")"
echo "package.json exists: $(test -f package.json && echo "âœ…" || echo "âŒ")"
echo "pnpm-lock.yaml exists: $(test -f pnpm-lock.yaml && echo "âœ…" || echo "âŒ")"
echo "nixpacks.toml exists: $(test -f nixpacks.toml && echo "âœ…" || echo "âŒ")"

echo ""
echo "ğŸš€ Build Debug Complete!"
